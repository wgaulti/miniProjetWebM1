<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mon Personnage</title>
<link rel="stylesheet" href="general.css">
<script src="cookies.js"></script>
</head>
<body>

<p> 
Nom : <span id="nameValue" class="bold"></span> <br>
HP : <span id="HPValue" class="bold" ></span><br>
Attaque : <span id="attackValue" class="bold"></span><br>
Esquive : <span id="dodgeValue" class="bold"></span><br>

Nom ennemi: <span id="foeNameValue" class="bold"></span> <br>
HP ennemi: <span id="foeHPValue" class="bold" onload="checkHP()"></span><br>
Attaque ennemi: <span id="foeAttackValue" class="bold"></span><br>
</p>

<div id="enemydead">
	<h3 id="labelDied"></h3>
	<h3 id="labelEnemiesKilled"></h3>
	<h2>Counter: <span id="killCounter">0</span></h2>
	<button id="nextEnemyBtn" onclick="window.location.href='/nextFoe'">Next enemy</button>
</div>
	
<!--p id="reponse-serv"></p-->

<script>
//cherche et affiche le nom
document.getElementById("nameValue").innerHTML = findValueCookie("name"); 
document.getElementById("attackValue").innerHTML = findValueCookie("attack"); 
document.getElementById("HPValue").innerHTML = findValueCookie("HP"); 
document.getElementById("dodgeValue").innerHTML = findValueCookie("dodge"); 

document.getElementById("foeNameValue").innerHTML = findValueCookie("foeName"); 
document.getElementById("foeAttackValue").innerHTML = findValueCookie("foeAttack"); 
document.getElementById("foeHPValue").innerHTML = findValueCookie("foeHP");

if(findValueCookie("HP") == 0)
{
	document.getElementById("labelDied").innerHTML = "You died";
	document.getElementById("labelDied").innerHTML = "You killed " + findValueCookie("foeNumber") + " enemies.";
	document.getElementById("nextEnemyBtn").disabled = true;
}

else if(findValueCookie("foeHP") != 0) {
	document.getElementById("labelEnemyBtn").innerHTML = "";
	document.getElementById("nextEnemyBtn").disabled = true;
}

else {
	document.getElementById("labelEnemyBtn").innerHTML = "You killed the enemy";
	document.getElementById("nextEnemyBtn").disabled = false;
	var counter = parseInt(document.getElementById("killCounter").innerHTML);
	counter++;
	document.getElementById("killCounter").innerHTML = counter;
}

/*var reponseDuServ = document.getElementById("reponse-serv");
nextEnemyBtn.onclick = function(){
	var xhr = new XMLHttpRequest();
	xhr.open('GET', 'nextFoe');
	xhr.onload = function(){
		if(xhr.status === 200){
			reponseDuServ.innerHTML = xhr.responseText;
		}
		else {
			alert('Request failed. Returned status of ' + xhr.status);
		}
	};
	xhr.send();
}*/

</script>

<a href="/takeOrDodgeDammage.html" class ="button">Take Damage?</a>

</body>
</html>